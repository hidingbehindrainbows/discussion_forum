{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}
<div class="article-entry card">
    <div class="card-header">
        <h2>{{ object.title }}</h2>
        <p>
            by 
            {% if object.author.profile.pfp %}
                <img src="{{ object.author.profile.pfp.url}}" width=40 height=40 class="rounded">
            {% else %}
                <img src="{% static 'threads/images/default_profile.jpg' %}" width=40 height=40 class="rounded">
            {% endif %}
            <a href="{% url 'user_profile' object.author.id %}">{{ object.author }}</a> | {{ object.date }}
        </p>
        <p>
            {{ object.category }}
        </p>
    </div>
    <p class="card-body">
        {% if object.thread_image %}
            <img src="{{ object.thread_image.url}}" width=100 height=100><br>
        {% endif %}
        {{ object.body }}
    </p>
<p>
    {% if user.id == object.author.id  %}
        <a href="{% url 'thread_edit' thread.pk %}">Edit</a> | <a href="{% url 'thread_delete' thread.pk %}">Delete</a><br>
    {% endif %}
</p>
</div>
<div>
    <h4>Comments:</h4><hr>
    {% for comment in object.comment_set.all %}
    <p>
        {{ comment.author }}:<br>{{ comment }}<hr>
    </p>
    {% endfor%}
</div>
<div>
    <h4>Add a comment</h4>
    <form method="post">
        {% csrf_token %}
        {{ form|crispy }}
        <button type="submit" class="btn btn-success ml-2">Submit</button>
    </form>
</div>
<p>
    Do you want to go <a href="{% url 'thread_list' %}">back to all threads?</a>
</p>
{% endblock content %}